// RUN: compiler %s -llvm-dump 2>&1 | filecheck %s
// RUN: compiler %s -o generic_unit_function && ./generic_unit_function | grep -Plzx '123\n'
fn wrapper<T>(x: (T) -> T, a: T) {
  x(a);
}

fn sideEffect(x: unit) {
  println(123);
}

fn main() {
  wrapper(sideEffect, unit);
}
// CHECK: define void @__builtin_main() {
// CHECK-NEXT: entry:
// CHECK-NEXT:   call void @_Y7wrapperGuE(ptr @sideEffect)
// CHECK-NEXT:   ret void
// CHECK-NEXT: }

// CHECK: define void @_Y7wrapperGuE(ptr %x) {
// CHECK-NEXT: entry:
// CHECK-NEXT:   call void %x()
// CHECK-NEXT:   ret void
// CHECK-NEXT: }
