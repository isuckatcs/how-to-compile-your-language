// RUN: compiler %s -res-dump 2>&1 | filecheck %s
struct Point {
  x: number,
  y: number,
}
// CHECK: StructDecl: @({{.*}}) Point:
// CHECK-NEXT:   FieldDecl: @({{.*}}) x
// CHECK-NEXT:   FieldDecl: @({{.*}}) y

struct Color {
  r: number,
  g: number,
  b: number,
  p: Point,
}
// CHECK: StructDecl: @({{.*}}) Color:
// CHECK-NEXT:   FieldDecl: @({{.*}}) r
// CHECK-NEXT:   FieldDecl: @({{.*}}) g
// CHECK-NEXT:   FieldDecl: @({{.*}}) b
// CHECK-NEXT:   FieldDecl: @({{.*}}) p

fn main(): void {
  let x = Color { 
    r: 0,
    g: 1,
    b: 2,
    p: Point { x: 3 + 4, y: 4 * 9 },
  };
}
// CHECK: FunctionDecl: @({{.*}}) main:
// CHECK-NEXT:   Block
// CHECK-NEXT:     DeclStmt:
// CHECK-NEXT:       VarDecl: @({{.*}}) x:
// CHECK-NEXT:         StructInstantiationExpr: @({{.*}})
// CHECK-NEXT:           FieldInitStmt: @({{.*}}) r
// CHECK-NEXT:             NumberLiteral: '0'
// CHECK-NEXT:             | value: 0
// CHECK-NEXT:           FieldInitStmt: @({{.*}}) g
// CHECK-NEXT:             NumberLiteral: '1'
// CHECK-NEXT:             | value: 1
// CHECK-NEXT:           FieldInitStmt: @({{.*}}) b
// CHECK-NEXT:             NumberLiteral: '2'
// CHECK-NEXT:             | value: 2
// CHECK-NEXT:           FieldInitStmt: @({{.*}}) p
// CHECK-NEXT:             StructInstantiationExpr: @({{.*}})
// CHECK-NEXT:               FieldInitStmt: @({{.*}}) x
// CHECK-NEXT:                 BinaryOperator: '+'
// CHECK-NEXT:                 | value: 7
// CHECK-NEXT:                   NumberLiteral: '3'
// CHECK-NEXT:                   NumberLiteral: '4'
// CHECK-NEXT:               FieldInitStmt: @({{.*}}) y
// CHECK-NEXT:                 BinaryOperator: '*'
// CHECK-NEXT:                 | value: 36
// CHECK-NEXT:                   NumberLiteral: '4'
// CHECK-NEXT:                   NumberLiteral: '9'