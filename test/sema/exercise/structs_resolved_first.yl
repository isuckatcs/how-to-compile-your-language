// RUN: compiler %s -res-dump 2>&1 | filecheck %s
fn foo(s: S): S2 {
  return S2 { x: s.x, y: s.y };
}

fn main(): unit {}

struct S { x: number, y:number }
struct S2 { x: number, y:number }
// CHECK: StructDecl @({{.*}}) S {S}
// CHECK-NEXT:   FieldDecl @({{.*}}) x {number}
// CHECK-NEXT:   FieldDecl @({{.*}}) y {number}

// CHECK-NEXT: StructDecl @({{.*}}) S2 {S2}
// CHECK-NEXT:   FieldDecl @({{.*}}) x {number}
// CHECK-NEXT:   FieldDecl @({{.*}}) y {number}

// CHECK-NEXT: FunctionDecl @({{.*}}) println {(number) -> unit}
// CHECK-NEXT:   ParamDecl @({{.*}}) n {number}
// CHECK-NEXT:   Block

// CHECK-NEXT: FunctionDecl @({{.*}}) foo {(S) -> S2}
// CHECK-NEXT:   ParamDecl @({{.*}}) s {S}
// CHECK-NEXT:   Block
// CHECK-NEXT:     ReturnStmt
// CHECK-NEXT:       StructInstantiationExpr {S2}
// CHECK-NEXT:         DeclRefExpr @({{.*}}) S2 {S2}
// CHECK-NEXT:         FieldInitStmt @({{.*}}) x
// CHECK-NEXT:           MemberExpr @({{.*}}) x {number}
// CHECK-NEXT:             DeclRefExpr @({{.*}}) s {S}
// CHECK-NEXT:         FieldInitStmt @({{.*}}) y
// CHECK-NEXT:           MemberExpr @({{.*}}) y {number}
// CHECK-NEXT:             DeclRefExpr @({{.*}}) s {S}

// CHECK-NEXT: FunctionDecl @({{.*}}) main {() -> unit}
// CHECK-NEXT:   Block
