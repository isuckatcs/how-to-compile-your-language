// RUN: compiler %s -res-dump 2>&1 | filecheck %s
struct S<T> { x: T }
// CHECK: StructDecl @({{.*}}) S {S<T>}
// CHECK-NEXT:   TypeParamDecl @({{.*}}) T
// CHECK-NEXT:   FieldDecl @({{.*}}) x {T}

fn wrapper<U>(x: S<U>): S<U> {
  return x;
}
// CHECK: FunctionDecl @({{.*}}) wrapper {(S<U>) -> S<U>}
// CHECK-NEXT:   TypeParamDecl @({{.*}}) U
// CHECK-NEXT:   ParamDecl @({{.*}}) x {S<U>}
// CHECK-NEXT:   Block
// CHECK-NEXT:     ReturnStmt
// CHECK-NEXT:       DeclRefExpr @({{.*}}) x {S<U>}

fn main(): unit {
  let f: (S<number>) -> S<number> = wrapper;
}
// CHECK: FunctionDecl @({{.*}}) main {() -> unit}
// CHECK-NEXT:   Block
// CHECK-NEXT:     DeclStmt
// CHECK-NEXT:       VarDecl @({{.*}}) f {(S<number>) -> S<number>}
// CHECK-NEXT:         DeclRefExpr @({{.*}}) wrapper {(S<number>) -> S<number>}
