// RUN: compiler %s -llvm-dump 2>&1 | filecheck %s
// RUN: compiler %s -o generic_function_generic_struct_param && ./generic_function_generic_struct_param | grep -Plzx '11\n12\n'

struct S<U> {
  x: U
}

// CHECK: define void @_Y18genericStructParamGnE(ptr sret({ double }) %ret, ptr byval({ double }) %s, double %x)
fn genericStructParam<T>(var s: S<T>, x: T): S<T> {
  s.x = x;
  return s;
}

fn main(): void {
  let s = S{x: 12};
  println(genericStructParam(s, 11).x);
  println(s.x);
}
