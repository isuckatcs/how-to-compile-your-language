// RUN: compiler %s -res-dump 2>&1 | filecheck %s
struct S<T> { x: T }
// CHECK: StructDecl @({{.*}}) S {S<T>}
// CHECK-NEXT:   TypeParamDecl @({{.*}}) T
// CHECK-NEXT:   FieldDecl @({{.*}}) x {T}

fn wrapper<T, U>(x: T, y: T, z: U): unit {}
// CHECK: FunctionDecl @({{.*}}) wrapper {(T, T, U) -> unit}
// CHECK-NEXT:   TypeParamDecl @({{.*}}) T
// CHECK-NEXT:   TypeParamDecl @({{.*}}) U
// CHECK-NEXT:   ParamDecl @({{.*}}) x {T}
// CHECK-NEXT:   ParamDecl @({{.*}}) y {T}
// CHECK-NEXT:   ParamDecl @({{.*}}) z {U}
// CHECK-NEXT:   Block

fn main(): unit {
  wrapper(S{ x: 1 }, S{ x: 2 }, main);
}
// CHECK: FunctionDecl @({{.*}}) main {() -> unit}
// CHECK-NEXT:   Block
// CHECK-NEXT:     CallExpr {unit}
// CHECK-NEXT:       DeclRefExpr @({{.*}}) wrapper {(S<number>, S<number>, () -> unit) -> unit}
// CHECK-NEXT:       StructInstantiationExpr {S<number>}
// CHECK-NEXT:         DeclRefExpr @({{.*}}) S {S<number>}
// CHECK-NEXT:         FieldInitStmt @({{.*}}) x
// CHECK-NEXT:           NumberLiteral '1' {number}
// CHECK-NEXT:           | value: 1
// CHECK-NEXT:       StructInstantiationExpr {S<number>}
// CHECK-NEXT:         DeclRefExpr @({{.*}}) S {S<number>}
// CHECK-NEXT:         FieldInitStmt @({{.*}}) x
// CHECK-NEXT:           NumberLiteral '2' {number}
// CHECK-NEXT:           | value: 2
// CHECK-NEXT:       DeclRefExpr @({{.*}}) main {() -> unit}
