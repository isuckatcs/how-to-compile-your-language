// RUN: compiler %s -res-dump 2>&1 | filecheck %s
struct S {
  x: number,
  n: S2
}

struct S2 {
  x: number
}

fn main(): unit {
  let s = S { x: 0, n: S2 { x: 1 } };

  let x = s.n.x;
}
// CHECK: StructDecl @({{.*}}) S {S}
// CHECK-NEXT:   FieldDecl @({{.*}}) x {number}
// CHECK-NEXT:   FieldDecl @({{.*}}) n {S2}
// CHECK-NEXT: StructDecl @({{.*}}) S2 {S2}
// CHECK-NEXT:   FieldDecl @({{.*}}) x {number}
// CHECK-NEXT: FunctionDecl @({{.*}}) println {(number) -> unit}
// CHECK-NEXT:   ParamDecl @({{.*}}) n {number}
// CHECK-NEXT:   Block
// CHECK-NEXT: FunctionDecl @({{.*}}) main {() -> unit}
// CHECK-NEXT:   Block
// CHECK-NEXT:     DeclStmt
// CHECK-NEXT:       VarDecl @({{.*}}) s {S}
// CHECK-NEXT:         StructInstantiationExpr {S}
// CHECK-NEXT:           DeclRefExpr @({{.*}}) S {S}
// CHECK-NEXT:           FieldInitStmt @({{.*}}) x
// CHECK-NEXT:             NumberLiteral '0' {number}
// CHECK-NEXT:             | value: 0
// CHECK-NEXT:           FieldInitStmt @({{.*}}) n
// CHECK-NEXT:             StructInstantiationExpr {S2}
// CHECK-NEXT:               DeclRefExpr @({{.*}}) S2 {S2}
// CHECK-NEXT:               FieldInitStmt @({{.*}}) x
// CHECK-NEXT:                 NumberLiteral '1' {number}
// CHECK-NEXT:                 | value: 1
// CHECK-NEXT:     DeclStmt
// CHECK-NEXT:       VarDecl @({{.*}}) x {number}
// CHECK-NEXT:         MemberExpr @({{.*}}) x {number}
// CHECK-NEXT:           MemberExpr @({{.*}}) n {S2}
// CHECK-NEXT:             DeclRefExpr @({{.*}}) s {S}
