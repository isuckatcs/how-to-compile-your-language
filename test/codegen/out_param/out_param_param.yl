// RUN: compiler %s -llvm-dump 2>&1 | filecheck %s
// RUN: compiler %s -o out_param_param && ./out_param_param | grep -Plzx '2\n1\n1\n2\n'
fn swap<T>(x: &T, y: &T) {
  let tmp = x;
  x = y;
  y = tmp;
}

// CHECK: define void @foo(double %x, double %y) {
fn foo(mut x: number, mut y: number) {
  // CHECK: %x1 = alloca double, align 8
  // CHECK-NEXT: %y2 = alloca double, align 8
  // CHECK-NEXT: store double %x, ptr %x1, align 8
  // CHECK-NEXT: store double %y, ptr %y2, align 8

  println(x);
  println(y);

  swap(&x, &y);
  // CHECK: call void @_Y4swapGnE(ptr %x1, ptr %y2)

  println(x);
  println(y);
}

fn main() {
  foo(2, 1);
}
