// RUN: compiler %s -res-dump 2>&1 | filecheck %s
struct S<T> {
  x: (T)-> T
}

fn boxNum(x: number): number {
  return x;
}

fn main(): unit {
  let s = S{x: boxNum};
  // CHECK: DeclStmt
  // CHECK-NEXT:   VarDecl @({{.*}}) s {S<number>}
  // CHECK-NEXT:     StructInstantiationExpr {S<number>}
  // CHECK-NEXT:       DeclRefExpr @({{.*}}) S {S<number>}
  // CHECK-NEXT:       FieldInitStmt @({{.*}}) x
  // CHECK-NEXT:         DeclRefExpr @({{.*}}) boxNum {(number) -> number}

  println(s.x(10));
  // CHECK-NEXT: CallExpr {unit}
  // CHECK-NEXT:   DeclRefExpr @({{.*}}) println {(number) -> unit}
  // CHECK-NEXT:   CallExpr {number}
  // CHECK-NEXT:     MemberExpr @({{.*}}) x {(number) -> number}
  // CHECK-NEXT:       DeclRefExpr @({{.*}}) s {S<number>}
  // CHECK-NEXT:     NumberLiteral '10' {number}
  // CHECK-NEXT:     | value: 10
}
